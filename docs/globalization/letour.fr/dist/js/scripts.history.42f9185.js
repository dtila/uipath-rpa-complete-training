(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{44:function(t,a,e){e(45),$(function(){function t(t,a){t.parent().append(a),$("body").not(a).one("click",function(){t.data("autocomplete",a.clone()),a.remove()}),a.find("> *").on("click",function(e){e.stopPropagation(),t.attr("data-value",$(this).attr("data-value")),t.val($(this).attr("data-label")),t.data("autocomplete",a.clone()),a.remove()})}var a=["city","rider","country"],e=$(".js-spinner-wrapper"),i=[],n=[];function s(t){n.push(t),e.find("> .is-active").removeClass("is-active"),e.find("#"+t).addClass("is-active")}function o(t,a,r){if(t=t.replace("/","-"),i.includes(t))s(t);else{r=void 0!==r?r:{};var l=utils.getSpinner(),c=$(".js-spinner-wrapper").first();c.append(l),$.post(a,r).done(function(a){e.find("> .is-active").removeClass("is-active");var s,r=$("<div class='dateTabs__content__item tabs__content js-tabs-content is-active dateTabs__content__added-item container' id='"+t+"'>");r.append(a),e.append(r),i.push(t),n.push(t),$(".js-expand-rider").on("click",function(t){t.preventDefault(),utils.jsExtend(this)}),(s=r).find(".es-link").on("click",function(t){t.stopPropagation(),t.preventDefault();var a=$(this).data("post")||[],e=Object.values(a);e.sort();var i=$(this).data("ajax-infos");o([i.type,i.id].concat(e).join("-"),i.url,a)}),s.find(".es-link-millesime").on("click",function(t){t.stopPropagation(),t.preventDefault();var a=$(this),e=$(".dateTabs").find(".dateTabs__link").filter(function(){return $(this).data("tabs-target")===a.data("target")}),i=e.closest(".slick-slide");e.closest(".slider").slick("goTo",i.data("slick-index")),e.click()})}).always(function(){c.find(".js-spinner").remove()})}}setTimeout(function(){$(window).scroll()},100),$(".es-search").on("click",function(){var t,a=$(this).parent(),e=a.find("input[id^=es-]").first(),i=e.attr("id").replace("es-",""),n=i,s=[],r={};if(t=e.attr("data-value"),!(e.val().length<3)&&t){switch(n){case"country":var l=a.find("select[name=type]").val();n=n+"/"+(["PMT","PMP","PMM","PMJ"].includes(l)?"jerseys":l)}var c=!0;if(a.find("select.es-option").each(function(){var t=$(this).attr("name"),a=$(this).val();"none"===a&&(c=!1),r[t]=a,s.push(a.toLowerCase())}),c)s.sort(),o([i,t].concat(s).join("-"),"block/history/"+n+"/"+t,r)}}),$(".history .js-tabs").jtabs().on("tabs-showed",function(){e.find(".js-tabs-nav, .rankingTable").hScroll(),e.find(".js-tabs-nested").on("tabs-showed",function(){e.find(".rankingTable").hScroll()}),a.forEach(function(t){e.find("*[id^="+t+"]").removeClass("is-active")})}),$(".es-ajax-input").attr("data-value",null),$(".es-ajax-input").closest(".field-group").find(".es-search").append('<div class="autocomplete--loader">'),$(".es-ajax-input").on("click",function(a){a.stopPropagation();var e=$(this).data("autocomplete");$("body").trigger("click"),e&&t($(this),e)}),$(".es-ajax-input").on("input",function(){var a=$(this),e=a.closest(".field-group"),i=a.val(),n=e.find(".autocomplete--loader");a.removeAttr("data-value"),a.removeData("autocomplete");var s=$(this).attr("id")+"-autocomplete__list",o=$("."+s);if(i.length<3)return a.data("request")&&(a.data("request").abort(),a.data("request",null)),void o.remove();var r=$(this).attr("id").replace("es-","");a.data("request")&&(a.data("request").abort(),a.data("request",null)),e.find(".es-search > *").addClass("invisible"),n.addClass("autocomplete--loader--active");var l=$.post("ajax/history/search/"+r,{query:i}).done(function(e){if(!(a.data("request")>1||a.val().length<3)){(o=$("."+s).length>0?$("."+s):$("<div class='"+s+" autocomplete__items'>")).empty(),o.attr("data-values",JSON.stringify(e)),e.forEach(function(t){var e=$("<div>"),n="label";"city"==r&&(n="historyLabel"),e.text(t[n]),"city"==r?e.attr("data-value",t.historyCode):e.attr("data-value",t.id),e.attr("data-label",t[n]),t[n].toLowerCase()==i.toLowerCase()&&a.attr("data-value",e.attr("data-value")),o.append(e)});var n=a.position().top+a.outerHeight();o.css({width:a.css("width"),position:"absolute",margin:0,top:n+"px"}),t(a,o)}}).always(function(){e.find(".es-search > *").removeClass("invisible"),n.removeClass("autocomplete--loader--active")});a.data("request",l)});var r=!1,l=!1;history.pushState(null,null,location.href),window.onpopstate=function(){r?history.go(-1):l||(setTimeout(function(){l=!1},100),n.pop(),n.length>0?(s(n.pop()),l=!0,history.go(1)):(r=!0,history.go(-1)))}})},45:function(t,a,e){e(46)},46:function(t,a){}},[[44,0]]]);